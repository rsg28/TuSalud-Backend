-- =============================================================================
-- Script de población - EXÁMENES DE LABORATORIO
-- Inserta exámenes de laboratorio con precios en las 3 sedes
-- =============================================================================

-- Obtener IDs de las sedes (ya deben estar creadas)
SET @sede_arequipa = (SELECT id FROM sedes WHERE nombre = 'Sede Arequipa');
SET @sede_lima = (SELECT id FROM sedes WHERE nombre = 'Sede Lima');
SET @sede_cusco = (SELECT id FROM sedes WHERE nombre = 'Sede Cusco');

-- =============================================================================
-- INSERTAR EXAMENES DE LABORATORIO
-- =============================================================================
INSERT INTO examenes (id, nombre, categoria, codigo, activo) VALUES
(138, 'Calcio en orina', 'LABORATORIO', 'LAB-138', 1),
(142, 'Ganmaglutamil transpeptidasa (GGTP)', 'LABORATORIO', 'LAB-142', 1),
(152, 'Fibrinógeno', 'LABORATORIO', 'LAB-152', 1),
(157, 'RPR/VDRL', 'LABORATORIO', 'LAB-157', 1),
(135, 'Amilasa', 'LABORATORIO', 'LAB-135', 1),
(139, 'Magnesio en orina', 'LABORATORIO', 'LAB-139', 1),
(149, 'Tiempo de coagulación y sangría', 'LABORATORIO', 'LAB-149', 1),
(754, 'KOH en uñas', 'LABORATORIO', 'LAB-154', 1),
(136, 'Proteína total y fraccionada', 'LABORATORIO', 'LAB-136', 1),
(183, 'FIRMA PATOLOGO ADICIONAL', 'LABORATORIO', 'LAB-183', 1),
(50, 'UREA', 'LABORATORIO', 'LAB-050', 1),
(59, 'TGP', 'LABORATORIO', 'LAB-059', 1),
(60, 'TGO', 'LABORATORIO', 'LAB-060', 1),
(69, 'ACIDO URICO', 'LABORATORIO', 'LAB-069', 1),
(133, 'Fosfatasa alcalina', 'LABORATORIO', 'LAB-133', 1),
(134, 'Bilirrubina total y fraccionada', 'LABORATORIO', 'LAB-134', 1),
(155, 'Ex. De heces (parasitológico X1 muestra)', 'LABORATORIO', 'LAB-155', 1),
(174, 'Panel (10 drogas)', 'LABORATORIO', 'LAB-174', 1),
-- IDs 1, 4, 6 ya usados en exámenes anteriores, usar nuevos IDs
(701, 'GRUPO SANGUÍNEO Y FACTOR RH', 'LABORATORIO', 'LAB-001', 1),
(704, 'CREATININA', 'LABORATORIO', 'LAB-004', 1),
(706, 'EXAMEN COMPLETO DE ORINA', 'LABORATORIO', 'LAB-006', 1),
(128, 'Glucosa (basal o postprandial)', 'LABORATORIO', 'LAB-128', 1),
(144, 'PSA cuantitativo (total o libre)', 'LABORATORIO', 'LAB-144', 1),
(173, 'Panel (5 drogas)', 'LABORATORIO', 'LAB-173', 1),
-- IDs 25, 26 ya usados, usar nuevos
(725, 'COLESTEROL', 'LABORATORIO', 'LAB-025', 1),
(726, 'HEMOGLOBINA', 'LABORATORIO', 'LAB-026', 1),
(49, 'TRIGLICÉRIDOS', 'LABORATORIO', 'LAB-049', 1),
(65, 'HDL', 'LABORATORIO', 'LAB-065', 1),
(66, 'LDL', 'LABORATORIO', 'LAB-066', 1),
(129, 'Reticulocitos', 'LABORATORIO', 'LAB-129', 1),
(130, 'Constantes corpusculares', 'LABORATORIO', 'LAB-130', 1),
(132, 'VLDL', 'LABORATORIO', 'LAB-132', 1),
(140, 'Vitamina B12', 'LABORATORIO', 'LAB-140', 1),
(148, 'TSH ultrasensible', 'LABORATORIO', 'LAB-148', 1),
(43, 'PROTEINA C REACTIVA', 'LABORATORIO', 'LAB-043', 1),
(137, 'Perfil hepático (TGO-TGP-GGTP-Fosfatasa - bilirrubina T y F-Proteina T y F)', 'LABORATORIO', 'LAB-137', 1),
(159, 'Hepatitis B - Igm cualitativo', 'LABORATORIO', 'LAB-159', 1),
(160, 'Hepatitis C - Igm cualitativo', 'LABORATORIO', 'LAB-160', 1),
(161, 'HCV', 'LABORATORIO', 'LAB-161', 1),
(162, 'HBs Antígeno australiano', 'LABORATORIO', 'LAB-162', 1),
(165, 'Colinesterasa sérica', 'LABORATORIO', 'LAB-165', 1),
(168, 'Hemoglobina glicosilada', 'LABORATORIO', 'LAB-168', 1),
(145, 'T3', 'LABORATORIO', 'LAB-145', 1),
(146, 'T4', 'LABORATORIO', 'LAB-146', 1),
(147, 'T4 LIBRE', 'LABORATORIO', 'LAB-147', 1),
(772, 'Cocaína - marihuana - éxtasis (3 drogas)', 'LABORATORIO', 'LAB-172', 1),
(166, 'Colinesterasa eritrocitaria- plasmática', 'LABORATORIO', 'LAB-166', 1),
(184, 'CITOQUIMICO LIQ. SINOVIAL', 'LABORATORIO', 'LAB-184', 1),
(143, 'PSA cualitativo', 'LABORATORIO', 'LAB-143', 1),
(163, 'Cultivo nasal (hisopado)', 'LABORATORIO', 'LAB-163', 1),
(164, 'Cultivo faríngeo (hisopado)', 'LABORATORIO', 'LAB-164', 1),
-- ID 22 ya usado, usar nuevo
(722, 'PERFIL LIPÍDICO COMPLETO', 'LABORATORIO', 'LAB-022', 1),
(141, 'Coprocultivo', 'LABORATORIO', 'LAB-141', 1),
(156, 'Hepatitis A cualitativo - Igm', 'LABORATORIO', 'LAB-156', 1),
(158, 'VIH cualitativo', 'LABORATORIO', 'LAB-158', 1),
(177, 'Manganeso en orina', 'LABORATORIO', 'LAB-177', 1),
(180, 'Mercurio suero', 'LABORATORIO', 'LAB-180', 1),
(182, 'MANGANESO SUERO', 'LABORATORIO', 'LAB-182', 1),
-- ID 30 ya usado, usar nuevo
(730, 'PANEL DE DROGAS (COCAINA Y MARIHUANA)', 'LABORATORIO', 'LAB-030', 1),
(131, 'Riesgo coronario (C-T -HDL-LDL-VLDL-Índice Coronario) PERFIL LIPIDICO', 'LABORATORIO', 'LAB-131', 1),
-- ID 17 ya usado, usar nuevo
(717, 'FACTOR REUMATOIDEO (CONV. COLECTIVO)', 'LABORATORIO', 'LAB-017', 1),
(167, 'Alcohol en saliva - prueba rápida', 'LABORATORIO', 'LAB-167', 1),
(74, 'BHCG CUALITATIVA', 'LABORATORIO', 'LAB-074', 1),
(150, 'Tiempo de protombina', 'LABORATORIO', 'LAB-150', 1),
(151, 'Tiempo de Troboplastina parcial activada', 'LABORATORIO', 'LAB-151', 1),
(153, 'Aglutinaciones febriles (Tífico y paratífico /salmonelosis)', 'LABORATORIO', 'LAB-153', 1),
(170, 'COCAINA', 'LABORATORIO', 'LAB-170', 1),
(171, 'MARIHUANA', 'LABORATORIO', 'LAB-171', 1),
(175, 'Plomo en orina', 'LABORATORIO', 'LAB-175', 1),
(176, 'Cadmio en orina', 'LABORATORIO', 'LAB-176', 1),
(178, 'Plomo suero', 'LABORATORIO', 'LAB-178', 1),
(179, 'Cromo suero', 'LABORATORIO', 'LAB-179', 1),
-- ID 2 ya usado, usar nuevo
(702, 'HEMOGRAMA COMPLETO', 'LABORATORIO', 'LAB-002', 1),
(169, 'Test de Graham', 'LABORATORIO', 'LAB-169', 1),
-- ID 23 ya usado, usar nuevo
(723, 'HEPATITIS A. IgM', 'LABORATORIO', 'LAB-023', 1);

-- =============================================================================
-- INSERTAR PRECIOS PARA LABORATORIO EN LAS 3 SEDES
-- =============================================================================

-- SEDE AREQUIPA
INSERT INTO examen_precio (examen_id, sede_id, precio) VALUES
(138, @sede_arequipa, 9.00),
(142, @sede_arequipa, 9.00),
(152, @sede_arequipa, 9.00),
(157, @sede_arequipa, 9.00),
(135, @sede_arequipa, 8.00),
(139, @sede_arequipa, 8.00),
(149, @sede_arequipa, 8.00),
(754, @sede_arequipa, 8.00),
(136, @sede_arequipa, 7.00),
(183, @sede_arequipa, 60.00),
(50, @sede_arequipa, 6.00),
(59, @sede_arequipa, 6.00),
(60, @sede_arequipa, 6.00),
(69, @sede_arequipa, 6.00),
(133, @sede_arequipa, 6.00),
(134, @sede_arequipa, 6.00),
(155, @sede_arequipa, 6.00),
(174, @sede_arequipa, 50.00),
(701, @sede_arequipa, 5.00),
(704, @sede_arequipa, 5.00),
(706, @sede_arequipa, 5.00),
(128, @sede_arequipa, 5.00),
(144, @sede_arequipa, 48.00),
(173, @sede_arequipa, 40.00),
(725, @sede_arequipa, 4.00),
(726, @sede_arequipa, 4.00),
(49, @sede_arequipa, 4.00),
(65, @sede_arequipa, 4.00),
(66, @sede_arequipa, 4.00),
(129, @sede_arequipa, 4.00),
(130, @sede_arequipa, 4.00),
(132, @sede_arequipa, 4.00),
(140, @sede_arequipa, 39.00),
(148, @sede_arequipa, 35.00),
(43, @sede_arequipa, 32.00),
(137, @sede_arequipa, 30.00),
(159, @sede_arequipa, 30.00),
(160, @sede_arequipa, 30.00),
(161, @sede_arequipa, 30.00),
(162, @sede_arequipa, 30.00),
(165, @sede_arequipa, 30.00),
(168, @sede_arequipa, 30.00),
(145, @sede_arequipa, 28.00),
(146, @sede_arequipa, 28.00),
(147, @sede_arequipa, 28.00),
(772, @sede_arequipa, 26.00),
(166, @sede_arequipa, 250.00),
(184, @sede_arequipa, 22.50),
(143, @sede_arequipa, 22.00),
(163, @sede_arequipa, 22.00),
(164, @sede_arequipa, 22.00),
(722, @sede_arequipa, 20.00),
(141, @sede_arequipa, 20.00),
(156, @sede_arequipa, 20.00),
(158, @sede_arequipa, 20.00),
(177, @sede_arequipa, 180.00),
(180, @sede_arequipa, 180.00),
(182, @sede_arequipa, 180.00),
(730, @sede_arequipa, 18.00),
(131, @sede_arequipa, 18.00),
(717, @sede_arequipa, 14.00),
(167, @sede_arequipa, 14.00),
(74, @sede_arequipa, 12.00),
(150, @sede_arequipa, 12.00),
(151, @sede_arequipa, 12.00),
(153, @sede_arequipa, 12.00),
(170, @sede_arequipa, 12.00),
(171, @sede_arequipa, 12.00),
(175, @sede_arequipa, 115.00),
(176, @sede_arequipa, 115.00),
(178, @sede_arequipa, 105.00),
(179, @sede_arequipa, 105.00),
(702, @sede_arequipa, 10.00),
(169, @sede_arequipa, 10.00),
(723, @sede_arequipa, 1.80),

-- SEDE LIMA
(138, @sede_lima, 9.00),
(142, @sede_lima, 9.00),
(152, @sede_lima, 9.00),
(157, @sede_lima, 9.00),
(135, @sede_lima, 8.00),
(139, @sede_lima, 8.00),
(149, @sede_lima, 8.00),
(754, @sede_lima, 8.00),
(136, @sede_lima, 7.00),
(183, @sede_lima, 60.00),
(50, @sede_lima, 6.00),
(59, @sede_lima, 6.00),
(60, @sede_lima, 6.00),
(69, @sede_lima, 6.00),
(133, @sede_lima, 6.00),
(134, @sede_lima, 6.00),
(155, @sede_lima, 6.00),
(174, @sede_lima, 50.00),
(701, @sede_lima, 5.00),
(704, @sede_lima, 5.00),
(706, @sede_lima, 5.00),
(128, @sede_lima, 5.00),
(144, @sede_lima, 48.00),
(173, @sede_lima, 40.00),
(725, @sede_lima, 4.00),
(726, @sede_lima, 4.00),
(49, @sede_lima, 4.00),
(65, @sede_lima, 4.00),
(66, @sede_lima, 4.00),
(129, @sede_lima, 4.00),
(130, @sede_lima, 4.00),
(132, @sede_lima, 4.00),
(140, @sede_lima, 39.00),
(148, @sede_lima, 35.00),
(43, @sede_lima, 32.00),
(137, @sede_lima, 30.00),
(159, @sede_lima, 30.00),
(160, @sede_lima, 30.00),
(161, @sede_lima, 30.00),
(162, @sede_lima, 30.00),
(165, @sede_lima, 30.00),
(168, @sede_lima, 30.00),
(145, @sede_lima, 28.00),
(146, @sede_lima, 28.00),
(147, @sede_lima, 28.00),
(772, @sede_lima, 26.00),
(166, @sede_lima, 250.00),
(184, @sede_lima, 22.50),
(143, @sede_lima, 22.00),
(163, @sede_lima, 22.00),
(164, @sede_lima, 22.00),
(722, @sede_lima, 20.00),
(141, @sede_lima, 20.00),
(156, @sede_lima, 20.00),
(158, @sede_lima, 20.00),
(177, @sede_lima, 180.00),
(180, @sede_lima, 180.00),
(182, @sede_lima, 180.00),
(730, @sede_lima, 18.00),
(131, @sede_lima, 18.00),
(717, @sede_lima, 14.00),
(167, @sede_lima, 14.00),
(74, @sede_lima, 12.00),
(150, @sede_lima, 12.00),
(151, @sede_lima, 12.00),
(153, @sede_lima, 12.00),
(170, @sede_lima, 12.00),
(171, @sede_lima, 12.00),
(175, @sede_lima, 115.00),
(176, @sede_lima, 115.00),
(178, @sede_lima, 105.00),
(179, @sede_lima, 105.00),
(702, @sede_lima, 10.00),
(169, @sede_lima, 10.00),
(723, @sede_lima, 1.80),

-- SEDE CUSCO
(138, @sede_cusco, 9.00),
(142, @sede_cusco, 9.00),
(152, @sede_cusco, 9.00),
(157, @sede_cusco, 9.00),
(135, @sede_cusco, 8.00),
(139, @sede_cusco, 8.00),
(149, @sede_cusco, 8.00),
(754, @sede_cusco, 8.00),
(136, @sede_cusco, 7.00),
(183, @sede_cusco, 60.00),
(50, @sede_cusco, 6.00),
(59, @sede_cusco, 6.00),
(60, @sede_cusco, 6.00),
(69, @sede_cusco, 6.00),
(133, @sede_cusco, 6.00),
(134, @sede_cusco, 6.00),
(155, @sede_cusco, 6.00),
(174, @sede_cusco, 50.00),
(701, @sede_cusco, 5.00),
(704, @sede_cusco, 5.00),
(706, @sede_cusco, 5.00),
(128, @sede_cusco, 5.00),
(144, @sede_cusco, 48.00),
(173, @sede_cusco, 40.00),
(725, @sede_cusco, 4.00),
(726, @sede_cusco, 4.00),
(49, @sede_cusco, 4.00),
(65, @sede_cusco, 4.00),
(66, @sede_cusco, 4.00),
(129, @sede_cusco, 4.00),
(130, @sede_cusco, 4.00),
(132, @sede_cusco, 4.00),
(140, @sede_cusco, 39.00),
(148, @sede_cusco, 35.00),
(43, @sede_cusco, 32.00),
(137, @sede_cusco, 30.00),
(159, @sede_cusco, 30.00),
(160, @sede_cusco, 30.00),
(161, @sede_cusco, 30.00),
(162, @sede_cusco, 30.00),
(165, @sede_cusco, 30.00),
(168, @sede_cusco, 30.00),
(145, @sede_cusco, 28.00),
(146, @sede_cusco, 28.00),
(147, @sede_cusco, 28.00),
(772, @sede_cusco, 26.00),
(166, @sede_cusco, 250.00),
(184, @sede_cusco, 22.50),
(143, @sede_cusco, 22.00),
(163, @sede_cusco, 22.00),
(164, @sede_cusco, 22.00),
(722, @sede_cusco, 20.00),
(141, @sede_cusco, 20.00),
(156, @sede_cusco, 20.00),
(158, @sede_cusco, 20.00),
(177, @sede_cusco, 180.00),
(180, @sede_cusco, 180.00),
(182, @sede_cusco, 180.00),
(730, @sede_cusco, 18.00),
(131, @sede_cusco, 18.00),
(717, @sede_cusco, 14.00),
(167, @sede_cusco, 14.00),
(74, @sede_cusco, 12.00),
(150, @sede_cusco, 12.00),
(151, @sede_cusco, 12.00),
(153, @sede_cusco, 12.00),
(170, @sede_cusco, 12.00),
(171, @sede_cusco, 12.00),
(175, @sede_cusco, 115.00),
(176, @sede_cusco, 115.00),
(178, @sede_cusco, 105.00),
(179, @sede_cusco, 105.00),
(702, @sede_cusco, 10.00),
(169, @sede_cusco, 10.00),
(723, @sede_cusco, 1.80);

-- =============================================================================
-- VERIFICACIÓN
-- =============================================================================
SELECT 'Exámenes de LABORATORIO creados:' AS Info, COUNT(*) AS Total FROM examenes WHERE categoria = 'LABORATORIO';
SELECT 'Precios de LABORATORIO por sede:' AS Info, s.nombre AS Sede, COUNT(ep.id) AS Total_Examenes
FROM sedes s
LEFT JOIN examen_precio ep ON s.id = ep.sede_id
LEFT JOIN examenes e ON ep.examen_id = e.id
WHERE e.categoria = 'LABORATORIO'
GROUP BY s.id, s.nombre;
